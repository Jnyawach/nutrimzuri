<main>

    <section>
        <div  class="relative w-full">
            <!-- Carousel wrapper -->
            <div class="relative overflow-hidden  h-[80vh]">

                <div class="absolute inset-0 w-full h-full flex transition-opacity duration-700 ease-in-out"  id="carousel-images">
                    {{collection:slideshow limit="3"}}
                    <img src="{{glide :src='image'  fit='crop_focal'}}" alt="{{image:alt}}"
                         id="slide{{ index }}"
                         class="absolute inset-0 w-full h-full object-cover
                            transition-opacity duration-1500 ease-in-out
                         {{ if first }}opacity-100{{ else }}opacity-0{{ /if }} "
                    >
                    {{/collection:slideshow}}
                </div>




            </div>


            <div class="absolute h-full w-full top-0 p-5 z-50 flex place-content-center bg-black/40">
                <div class="my-auto md:w-1/2 text-center">
                    <h1 class="text-5xl text-white font-black uppercase leading-relaxed">
                        Creating sustainable  solution for animal & crop nutrition
                    </h1>
                </div>
            </div>


        </div>
    </section>
    <section class="bg-slate-50">
        <div class="max-w-[1280px] mx-auto my-5 p-3">
        <div x-data="{
        currentSlideIndex: 1,
         productCount:  parseInt($el.getAttribute('data-product-count')),
    previous() {
        if (this.currentSlideIndex > 1) {
            this.currentSlideIndex = this.currentSlideIndex - 1
        } else {
            // If it's the first slide, go to the last slide
            this.currentSlideIndex = this.productCount
        }
    },
    next() {
        if (this.currentSlideIndex < this.productCount) {
            this.currentSlideIndex = this.currentSlideIndex + 1
        } else {
            // If it's the last slide, go to the first slide
            this.currentSlideIndex = 1
        }
    },
}"
             x-init="$el.setAttribute('data-product-count', productCount)"
             data-product-count="{{ collection:products }} {{ (count / 4) | ceil }}{{ /collection:products }}"
             class="relative w-full overflow-hidden">


            <!-- previous button -->
            <button type="button" class="absolute left-5 top-1/2 z-20 flex rounded-full -translate-y-1/2 items-center justify-center bg-white/40 p-2 text-neutral-600 transition hover:bg-white/60 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black active:outline-offset-0 dark:bg-neutral-950/40 dark:text-neutral-300 dark:hover:bg-neutral-950/60 dark:focus-visible:outline-white" aria-label="previous slide" x-on:click="previous()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="3" class="size-5 md:size-6 pr-0.5" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                </svg>
            </button>

            <!-- next button -->
            <button type="button" class="absolute right-5 top-1/2 z-20 flex rounded-full -translate-y-1/2 items-center justify-center bg-white/40 p-2 text-neutral-600 transition hover:bg-white/60 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black active:outline-offset-0 dark:bg-neutral-950/40 dark:text-neutral-300 dark:hover:bg-neutral-950/60 dark:focus-visible:outline-white" aria-label="next slide" x-on:click="next()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="3" class="size-5 md:size-6 pl-0.5" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                </svg>
            </button>

            <!-- slides -->
            <!-- Change min-h-[50svh] to your preferred height size -->
            <div class="relative min-h-[80svh] w-full hidden md:block">

                {{collection:products as="products"}}
                {{products chunk="4"}}
                <div x-show="currentSlideIndex =={{ index}} + 1" class="absolute inset-0" x-transition.opacity.duration.1000ms>
                    <div class="grid grid-cols-4 gap-2">
                        {{chunk}}
                        <a title="{{title}}" href="{{url}}">
                       <div>
                           <div class="overflow-hidden bg-gray-100 rounded-md">
                               <img src="{{glide :src='image' width=300  fit='crop_focal'}}" alt="{{logo:alt}}"
                                    class="mx-auto"


                               >
                           </div>
                           <h3 class="text-lg font-bold my-2 underline">{{name}}</h3>
                           <p>{{meta_description | safe_truncate(90, '... Read more')}}</p>
                       </div>
                        </a>
                        {{/chunk}}
                    </div>



                </div>
                {{/products}}
                {{/collection:products}}
            </div>


        </div>
        </div>
    </section>

    <section class="bg-slate-50">
        <div class="max-w-[1280px] mx-auto my-5 p-3">

            <div class="grid text-center">
                <div>
                    <div class="py-5 text-center">
                        <h2 class="text-4xl font-black ">Our Products</h2>
                        <hr class="w-16 mx-auto my-3 border-green-900 border-2">
                    </div>

                    <div class="grid md:grid-cols-3 gap-5 my-8 mx-auto md:w-2/3 divide-y divide-gray-200 md:divide-y-0">
                        {{collection:products}}
                        <a title="{{title}}" href="{{url}}">
                        <div>
                            <div class="overflow-hidden bg-gray-100 rounded-md">
                                <img src="{{glide :src='image' height=400   fit='crop_focal'}}" alt="{{logo:alt}}"
                                     class="w-full"
                                >

                            </div>
                            <h3 class="text-lg font-bold my-2 underline">{{name}}</h3>
                            <p>{{meta_description | safe_truncate(90, '... Read more')}}</p>
                        </div>
                        </a>
                        {{/collection:products}}
                    </div>

                </div>

            </div>
        </div>
    </section>
    <section class="bg-slate-50">
        <div class="max-w-[1280px] mx-auto my-5 p-3">

            <div class="grid text-center">
               <div>
                   <div class="py-5 text-center">
                       <h2 class="text-4xl font-black ">How we do this</h2>
                       <hr class="w-16 mx-auto my-3 border-green-900 border-2">
                   </div>
                   <p class="text-lg">
                       We incorporate principles of circular economy to<br>
                       produce sustainable animal feeds and feed ingredients.
                   </p>
                   <div class="grid md:grid-cols-3 gap-5 my-8 mx-auto md:w-2/3 divide-y divide-gray-200 md:divide-y-0">
                       <div class="p-3">
                           {{ asset url="/assets/static/waste-recycling.svg" }}
                           <img src="{{url}}" class="h-24 mx-auto my-3" alt="{{alt}}" >
                           {{ /asset }}
                           <p class="leading-relaxed">
                               Converting underutilized agro-processing wastes into valuable
                               animal feed ingredients and complete feeds
                           </p>
                       </div>
                       <div class="p-3">
                           {{ asset url="/assets/static/upcycling.svg" }}
                           <img src="{{url}}" class="h-24 mx-auto my-3" alt="{{alt}}" >
                           {{ /asset }}
                            <p class="leading-relaxed">
                                Up-cycling of waste generated at our facilities into feed ingredients thus closing the loop.
                            </p>
                       </div>
                       <div class="p-3">
                           {{ asset url="/assets/static/vertical-waste-integration.svg" }}
                           <img src="{{url}}" class="h-24 mx-auto my-3" alt="{{alt}}" >
                           {{ /asset }}
                           <p class="leading-relaxed">
                               We vertically integrate our supply chain by producing and processing key ingredients for our feed.
                           </p>
                       </div>
                   </div>

               </div>

            </div>
        </div>
    </section>

    <section class="bg-slate-100">
        <div class="max-w-[1280px] mx-auto my-5 p-3">

            <div class="grid text-center">
                <div>
                    <div class="py-5 text-center">
                        <h2 class="text-4xl font-black ">Our Impact</h2>
                        <hr class="w-16 mx-auto my-3 border-green-900 border-2">
                    </div>

                    <div class="grid md:grid-cols-2 gap-5 my-8 mx-auto">
                        <div>
                            <div  class="overflow-hidden rounded-lg">
                                {{ asset url="/assets/static/farmer-harvesting-tomato.jpg" }}
                                <img src="{{url}}" class="w-full hover:scale-105 duration-300" alt="{{alt}}">
                                {{ /asset }}
                            </div>
                        </div>
                        <div class="grid md:grid-cols-3 gap-2 self-center">
                            <div>
                                {{ asset url="/assets/static/climate-action.svg" }}
                                <img src="{{url}}" class="h-16 mx-auto my-3" alt="{{alt}}" >
                                {{ /asset }}
                                <h3 class="text-md font-bold my-3">Climate action</h3>
                                <p>
                                    We support climate action by promoting sustainable agriculture through
                                    waste recycling and eco-friendly feed and fertilizer production.
                                </p>
                            </div>
                            <div>
                                {{ asset url="/assets/static/food-security.svg" }}
                                <img src="{{url}}" class="h-16 mx-auto my-3" alt="{{alt}}" >
                                {{ /asset }}
                                <h3 class="text-md font-bold my-3">Food security</h3>
                                <p>
                                    We advance food security by providing sustainable feed solutions
                                    that enhance livestock productivity and support resilient farming systems.
                                </p>
                            </div>
                            <div>
                                {{ asset url="/assets/static/regenerative-agriculture.svg" }}
                                <img src="{{url}}" class="h-16 mx-auto my-3" alt="{{alt}}" >
                                {{ /asset }}
                                <h3 class="text-md font-bold my-3">Regenerative agriculture</h3>
                                <p>
                                   We champion regenerative agriculture by recycling waste into
                                    nutrient-rich inputs, restoring soil health, and promoting sustainable farming practices.
                                </p>
                            </div>
                        </div>


                    </div>

                </div>

            </div>
        </div>
    </section>

    <section class="bg-slate-50">
        <div class="max-w-[1280px] mx-auto my-5 p-3">

            <div class="grid text-center">
                <div>
                    <div class="py-5 text-center">
                        <h2 class="text-4xl font-black ">Our Partners</h2>
                        <hr class="w-16 mx-auto my-3 border-green-900 border-2">
                    </div>
                    <div class="my-3 grid grid-cols-2 md:grid-cols-5  gap-2">
                        {{collection:partners}}
                        <div class="overflow-hidden border border-gray-50 rounded-md">
                            <img src="{{glide :src='logo'  fit='crop_focal'}}" alt="{{logo:alt}}"
                                 class="w-full"
                            >
                        </div>
                        {{/collection:partners}}

                    </div>



                </div>

            </div>
        </div>
    </section>
</main>

<script>
    let currentSlide = 0;
    const totalSlides = 2;
    console.log(totalSlides)

    function showSlide(slideIndex) {
        for (let i = 1; i <= totalSlides; i++) {
            const slide = document.getElementById(`slide${i}`);
            if (i === slideIndex) {
                slide.classList.remove('opacity-0');
                slide.classList.add('opacity-100');
            } else {
                slide.classList.remove('opacity-100');
                slide.classList.add('opacity-0');
            }
        }
        currentSlide = slideIndex;
    }

    // Optional: Auto-Slide
    setInterval(() => {
        const nextSlide = currentSlide === totalSlides ? 1 : currentSlide + 1;
        showSlide(nextSlide);
    }, 5000);
</script>

